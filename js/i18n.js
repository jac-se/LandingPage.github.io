/**
 * Sistema de Internacionalización (i18n)
 * Soporte para Español (México) e Inglés
 */

const translations = {
    es: {
        // Header & Navigation
        'nav.inicio': 'Inicio',
        'nav.productos': 'Software como Servicio',
        'nav.servicios': 'Servicios',
        'nav.testimonios': 'Testimonios',

        // Hero
        'hero.title': 'Software como Servicio y Desarrollo a la Medida',
        'hero.subtitle': 'Soluciones profesionales en Java, Visual Basic .NET, PHP CodeIgniter 4. Desde aplicaciones web y escritorio hasta microservicios con IA. Descubre nuestro catálogo de herramientas listas para usar.',
        'hero.cta': 'Ver productos',

        // Productos
        'productos.title': 'Software como Servicio (SaaS)',
        'productos.buscar': 'Buscar productos...',
        'productos.categoria': 'Categoría:',
        'productos.tipo': 'Tipo:',
        'productos.todos': 'Todos',
        'productos.gratis': 'Gratis',
        'productos.pro': 'Pro',
        'productos.no-resultados': 'No se encontraron productos que coincidan con tu búsqueda.',

        // Servicios
        'servicios.title': 'Nuestros Servicios',
        'servicios.intro': 'Además de nuestros productos, ofrecemos servicios profesionales de desarrollo y consultoría',
        'servicios.desarrollo.titulo': 'Desarrollo de Software Profesional',
        'servicios.desarrollo.desc': 'Desarrollo en Java, Visual Basic .NET, PHP con CodeIgniter 4. Aplicaciones de escritorio, web, embebidas y scripts Bash. Arquitecturas monolíticas o microservicios según tus necesidades.',
        'servicios.api.titulo': 'APIs e Integración con IA',
        'servicios.api.desc': 'Desarrollo de APIs RESTful y integración con servicios de Inteligencia Artificial. Automatización inteligente para tu negocio.',
        'servicios.electronica.titulo': 'Productos Electrónicos',
        'servicios.electronica.desc': 'Venta de componentes y productos electrónicos de calidad.',
        'servicios.electronica.cta': 'Ver catálogo →',
        'servicios.medida.titulo': 'Desarrollo a Medida',
        'servicios.medida.desc': 'Soluciones personalizadas adaptadas a las necesidades específicas de tu proyecto.',
        'servicios.medida.cta': 'Contactar →',
        'servicios.soporte.titulo': 'Soporte Técnico',
        'servicios.soporte.desc': 'Formateo de equipos, instalación de software, configuración de impresoras y escáneres.',
        'servicios.soporte.cta': 'Contactar →',
        'servicios.cursos.titulo': 'Cursos Online',
        'servicios.cursos.desc': 'Accede a nuestros cursos en Udemy y YouTube para aprender a tu ritmo.',
        'servicios.cursos.cta': 'Ver cursos →',
        'servicios.asesorias.titulo': 'Asesorías Personalizadas',
        'servicios.asesorias.desc': 'Asesoría en programación, matemáticas e inglés. Contáctanos para agendar.',
        'servicios.asesorias.cta': 'Contactar →',

        // Testimonios
        'testimonios.title': 'Lo que dicen nuestros clientes',
        'testimonios.agregar': 'Agregar tu testimonio',

        // Footer
        'footer.copyright': '© 2025 JACC Software. Todos los derechos reservados.',
        'footer.desarrollado': 'Desarrollado por Jorge Cisneros',
        'footer.terminos': 'Términos y condiciones',
        'footer.privacidad': 'Aviso de privacidad',
        'footer.desarrollador': 'Acerca del desarrollador',

        // Cookie Banner
        'cookies.mensaje': 'Utilizamos cookies y Google Analytics para mejorar tu experiencia. Al continuar navegando, aceptas nuestra',
        'cookies.politica': 'Política de Privacidad',
        'cookies.aceptar': 'Aceptar',
        'cookies.rechazar': 'Rechazar'
    },
    en: {
        // Header & Navigation
        'nav.inicio': 'Home',
        'nav.productos': 'Software as a Service',
        'nav.servicios': 'Services',
        'nav.testimonios': 'Testimonials',

        // Hero
        'hero.title': 'Software as a Service and Custom Development',
        'hero.subtitle': 'Professional solutions in Java, Visual Basic .NET, PHP CodeIgniter 4. From web and desktop applications to microservices with AI. Discover our catalog of ready-to-use tools.',
        'hero.cta': 'View products',

        // Productos
        'productos.title': 'Software as a Service (SaaS)',
        'productos.buscar': 'Search products...',
        'productos.categoria': 'Category:',
        'productos.tipo': 'Type:',
        'productos.todos': 'All',
        'productos.gratis': 'Free',
        'productos.pro': 'Pro',
        'productos.no-resultados': 'No products found matching your search.',

        // Servicios
        'servicios.title': 'Our Services',
        'servicios.intro': 'In addition to our products, we offer professional development and consulting services',
        'servicios.desarrollo.titulo': 'Professional Software Development',
        'servicios.desarrollo.desc': 'Development in Java, Visual Basic .NET, PHP with CodeIgniter 4. Desktop, web, embedded applications and Bash scripts. Monolithic or microservices architectures according to your needs.',
        'servicios.api.titulo': 'APIs and AI Integration',
        'servicios.api.desc': 'RESTful API development and integration with Artificial Intelligence services. Intelligent automation for your business.',
        'servicios.electronica.titulo': 'Electronic Products',
        'servicios.electronica.desc': 'Sale of quality electronic components and products.',
        'servicios.electronica.cta': 'View catalog →',
        'servicios.medida.titulo': 'Custom Development',
        'servicios.medida.desc': 'Customized solutions adapted to the specific needs of your project.',
        'servicios.medida.cta': 'Contact →',
        'servicios.soporte.titulo': 'Technical Support',
        'servicios.soporte.desc': 'Computer formatting, software installation, printer and scanner configuration.',
        'servicios.soporte.cta': 'Contact →',
        'servicios.cursos.titulo': 'Online Courses',
        'servicios.cursos.desc': 'Access our courses on Udemy and YouTube to learn at your own pace.',
        'servicios.cursos.cta': 'View courses →',
        'servicios.asesorias.titulo': 'Personalized Consulting',
        'servicios.asesorias.desc': 'Consulting in programming, mathematics and English. Contact us to schedule.',
        'servicios.asesorias.cta': 'Contact →',

        // Testimonios
        'testimonios.title': 'What our clients say',
        'testimonios.agregar': 'Add your testimonial',

        // Footer
        'footer.copyright': '© 2025 JACC Software. All rights reserved.',
        'footer.desarrollado': 'Developed by Jorge Cisneros',
        'footer.terminos': 'Terms and conditions',
        'footer.privacidad': 'Privacy policy',
        'footer.desarrollador': 'About the developer',

        // Cookie Banner
        'cookies.mensaje': 'We use cookies and Google Analytics to improve your experience. By continuing to browse, you accept our',
        'cookies.politica': 'Privacy Policy',
        'cookies.aceptar': 'Accept',
        'cookies.rechazar': 'Reject'
    }
};

// ========== Variables globales ==========
let currentLanguage = 'es';

// ========== Inicialización ==========
function initI18n() {
    // Detectar idioma guardado o del navegador
    const savedLang = localStorage.getItem('language');
    const browserLang = navigator.language || navigator.userLanguage;

    if (savedLang) {
        currentLanguage = savedLang;
    } else if (browserLang.startsWith('en')) {
        currentLanguage = 'en';
    }

    // Aplicar idioma
    setLanguage(currentLanguage);

    // Configurar selector de idioma
    setupLanguageSelector();
}

// ========== Cambiar idioma ==========
function setLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('language', lang);

    // Actualizar atributo HTML lang
    document.documentElement.lang = lang;

    // Traducir todos los elementos con data-i18n
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Actualizar selector activo
    updateLanguageSelector();

    // Actualizar enlaces de aviso de privacidad
    updatePrivacyLinks();
}

// ========== Configurar selector de idioma ==========
function setupLanguageSelector() {
    const esBtn = document.getElementById('lang-es');
    const enBtn = document.getElementById('lang-en');

    if (esBtn) {
        esBtn.addEventListener('click', () => setLanguage('es'));
    }

    if (enBtn) {
        enBtn.addEventListener('click', () => setLanguage('en'));
    }
}

// ========== Actualizar selector activo ==========
function updateLanguageSelector() {
    const esBtn = document.getElementById('lang-es');
    const enBtn = document.getElementById('lang-en');

    if (esBtn && enBtn) {
        esBtn.classList.toggle('active', currentLanguage === 'es');
        enBtn.classList.toggle('active', currentLanguage === 'en');
    }
}

// ========== Actualizar enlaces de privacidad ==========
function updatePrivacyLinks() {
    const privacyLinks = document.querySelectorAll('a[href*="privacidad"], a[href*="privacy"]');
    privacyLinks.forEach(link => {
        if (currentLanguage === 'es') {
            link.href = 'aviso-privacidad.html';
        } else {
            link.href = 'privacy-policy.html';
        }
    });
}

// ========== Obtener traducción ==========
function t(key) {
    return translations[currentLanguage][key] || key;
}

// ========== Exportar funciones ==========
window.i18n = {
    init: initI18n,
    setLanguage: setLanguage,
    t: t,
    getCurrentLanguage: () => currentLanguage
};
